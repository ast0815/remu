

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Example 00 – Basic usage of binnings &mdash; ReMU  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=9edc463e" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../_static/doctools.js?v=fd6eb6e6"></script>
      <script src="../../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Example 01 – Building a response matrix" href="../01/README.html" />
    <link rel="prev" title="An example analysis" href="../README.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/ReMU.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/README.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../README.html">An example analysis</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../README.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../README.html#the-experimental-setup">The experimental setup</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../README.html#example-steps">Example steps</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Example 00 – Basic usage of binnings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#aims">Aims</a></li>
<li class="toctree-l4"><a class="reference internal" href="#instructions">Instructions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../01/README.html">Example 01 – Building a response matrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="../02/README.html">Example 02 – Simple model fits</a></li>
<li class="toctree-l3"><a class="reference internal" href="../03/README.html">Example 03 – Detector uncertainties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../04/README.html">Example 04 – Markov Chain Monte Carlo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../05/README.html">Example 05 – Backgrounds</a></li>
<li class="toctree-l3"><a class="reference internal" href="../06/README.html">Example 06 – Cross sections &amp; flux uncertainties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../PD/README.html">Example PD – Advanced data loading with pandas and ROOT</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/README.html">Module references</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ReMU</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../README.html">An example analysis</a></li>
      <li class="breadcrumb-item active">Example 00 – Basic usage of binnings</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/examples/00/README.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="example-00-basic-usage-of-binnings">
<span id="example00"></span><h1>Example 00 – Basic usage of binnings<a class="headerlink" href="#example-00-basic-usage-of-binnings" title="Link to this heading"></a></h1>
<section id="aims">
<h2>Aims<a class="headerlink" href="#aims" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Create “real” and simulated data of the mock experiemnt</p></li>
<li><p>Load data into histograms and plot it</p></li>
</ul>
</section>
<section id="instructions">
<h2>Instructions<a class="headerlink" href="#instructions" title="Link to this heading"></a></h2>
<p>The folder <code class="docutils literal notranslate"><span class="pre">../simple_experiment/</span></code> contains two scripts to create “real” and
simulated data. The script ‘simulate_experiment.py’ simulates the mock
experiment and creates two files: one file with the truth information of all
simulated events, and another file with the truth and reconstructed information
of all reconstructed events. The command line parameters determine the
properties of the simulation, e.g. whether to simulate background or signal and
what signal model to use.</p>
<p>The script <code class="docutils literal notranslate"><span class="pre">run_experiment.py</span></code> creates a single file with only reconstructed
information. Of course, this file is also  the result of simulations, but since
it is supposed to represent the real results of a real experiment, no truth
information is saved.</p>
<p>Create “real” data corresponding to ten years of running the experiment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ../simple_experiment/run_experiment.py 10 real_data.txt
</pre></div>
</div>
<p>Create simulated data corresponding to ten times the real data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ../simple_experiment/simulate_experiment.py 100 modelA modelA_data.txt modelA_truth.txt
$ ../simple_experiment/simulate_experiment.py 100 modelB modelB_data.txt modelB_truth.txt
</pre></div>
</div>
<p>The file <code class="docutils literal notranslate"><span class="pre">reco-binning.yml</span></code> contains a <code class="xref py py-class docutils literal notranslate"><span class="pre">RectilinearBinning</span></code> object
for the reconstructed information:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>!RectilinearBinning
variables:
- reco_x
- reco_y
bin_edges:
- [-.inf,
  ...
  .inf]
- [-.inf,
  ...
  .inf]
include_upper: false
</pre></div>
</div>
<p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">RectilinearBinning</span></code> object defines bin edges in multiple variables.
These variables are orthogonal to each other. The total number of bins is thus
the product of the number of bins per variable.</p>
<p>Let’s create a binning object, load the data into it, and plot the
distributions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">remu</span> <span class="kn">import</span> <span class="n">binning</span>
<span class="kn">from</span> <span class="nn">remu</span> <span class="kn">import</span> <span class="n">plotting</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;reco-binning.yml&quot;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">reco_binning</span> <span class="o">=</span> <span class="n">binning</span><span class="o">.</span><span class="n">yaml</span><span class="o">.</span><span class="n">full_load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="n">reco_binning</span><span class="o">.</span><span class="n">fill_from_csv_file</span><span class="p">(</span><span class="s2">&quot;real_data.txt&quot;</span><span class="p">)</span>

<span class="n">pltr</span> <span class="o">=</span> <span class="n">plotting</span><span class="o">.</span><span class="n">get_plotter</span><span class="p">(</span><span class="n">reco_binning</span><span class="p">)</span>
<span class="n">pltr</span><span class="o">.</span><span class="n">plot_values</span><span class="p">()</span>
<span class="n">pltr</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;real_data.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../../_images/real_data.png" src="../../_images/real_data.png" />
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">reco_binning</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="n">reco_binning</span><span class="o">.</span><span class="n">fill_from_csv_file</span><span class="p">(</span><span class="s2">&quot;modelA_data.txt&quot;</span><span class="p">)</span>

<span class="n">pltr</span> <span class="o">=</span> <span class="n">plotting</span><span class="o">.</span><span class="n">get_plotter</span><span class="p">(</span><span class="n">reco_binning</span><span class="p">)</span>
<span class="n">pltr</span><span class="o">.</span><span class="n">plot_values</span><span class="p">()</span>
<span class="n">pltr</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;modelA_data.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../../_images/modelA_data.png" src="../../_images/modelA_data.png" />
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">reco_binning</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="n">reco_binning</span><span class="o">.</span><span class="n">fill_from_csv_file</span><span class="p">(</span><span class="s2">&quot;modelB_data.txt&quot;</span><span class="p">)</span>

<span class="n">pltr</span> <span class="o">=</span> <span class="n">plotting</span><span class="o">.</span><span class="n">get_plotter</span><span class="p">(</span><span class="n">reco_binning</span><span class="p">)</span>
<span class="n">pltr</span><span class="o">.</span><span class="n">plot_values</span><span class="p">()</span>
<span class="n">pltr</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;modelB_data.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../../_images/modelB_data.png" src="../../_images/modelB_data.png" />
<p>Plotting the different kinds of <code class="xref py py-class docutils literal notranslate"><span class="pre">Binning</span></code> objects is handled by their
respective <code class="xref py py-class docutils literal notranslate"><span class="pre">BinningPlotter</span></code> classes. The function
<code class="xref py py-func docutils literal notranslate"><span class="pre">plotting.get_plotter()</span></code> will return an instance of the appropriate
plotting class for the provided binning, in this case a
<code class="xref py py-class docutils literal notranslate"><span class="pre">RectilinearBinningPlotter</span></code>.</p>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">RectilinearBinningPlotter</span></code> supports the <code class="docutils literal notranslate"><span class="pre">scatter</span></code> parameter,
which makes it draw pseudo scatter plots instead of 2D histograms. This is
useful to compare multiple distributions in the same plot:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pltr</span> <span class="o">=</span> <span class="n">plotting</span><span class="o">.</span><span class="n">get_plotter</span><span class="p">(</span><span class="n">reco_binning</span><span class="p">)</span>
<span class="n">reco_binning</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="n">reco_binning</span><span class="o">.</span><span class="n">fill_from_csv_file</span><span class="p">(</span><span class="s2">&quot;real_data.txt&quot;</span><span class="p">)</span>
<span class="n">pltr</span><span class="o">.</span><span class="n">plot_values</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">scatter</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
<span class="n">reco_binning</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="n">reco_binning</span><span class="o">.</span><span class="n">fill_from_csv_file</span><span class="p">(</span><span class="s2">&quot;modelA_data.txt&quot;</span><span class="p">)</span>
<span class="n">pltr</span><span class="o">.</span><span class="n">plot_values</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;model A&quot;</span><span class="p">,</span> <span class="n">scatter</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
<span class="n">reco_binning</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="n">reco_binning</span><span class="o">.</span><span class="n">fill_from_csv_file</span><span class="p">(</span><span class="s2">&quot;modelB_data.txt&quot;</span><span class="p">)</span>
<span class="n">pltr</span><span class="o">.</span><span class="n">plot_values</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;model B&quot;</span><span class="p">,</span> <span class="n">scatter</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
<span class="n">pltr</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">pltr</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;compare_data.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../../_images/compare_data.png" src="../../_images/compare_data.png" />
<p>We can do the same with the true information and its respective binning in
‘truth-binning.yml’:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;truth-binning.yml&quot;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">truth_binning</span> <span class="o">=</span> <span class="n">binning</span><span class="o">.</span><span class="n">yaml</span><span class="o">.</span><span class="n">full_load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="n">truth_binning</span><span class="o">.</span><span class="n">fill_from_csv_file</span><span class="p">(</span><span class="s2">&quot;modelA_truth.txt&quot;</span><span class="p">)</span>

<span class="n">pltr</span> <span class="o">=</span> <span class="n">plotting</span><span class="o">.</span><span class="n">get_plotter</span><span class="p">(</span><span class="n">truth_binning</span><span class="p">)</span>
<span class="n">pltr</span><span class="o">.</span><span class="n">plot_values</span><span class="p">()</span>
<span class="n">pltr</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;modelA_truth.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../../_images/modelA_truth.png" src="../../_images/modelA_truth.png" />
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">truth_binning</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="n">truth_binning</span><span class="o">.</span><span class="n">fill_from_csv_file</span><span class="p">(</span><span class="s2">&quot;modelB_truth.txt&quot;</span><span class="p">)</span>

<span class="n">pltr</span> <span class="o">=</span> <span class="n">plotting</span><span class="o">.</span><span class="n">get_plotter</span><span class="p">(</span><span class="n">truth_binning</span><span class="p">)</span>
<span class="n">pltr</span><span class="o">.</span><span class="n">plot_values</span><span class="p">()</span>
<span class="n">pltr</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;modelB_truth.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../../_images/modelB_truth.png" src="../../_images/modelB_truth.png" />
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pltr</span> <span class="o">=</span> <span class="n">plotting</span><span class="o">.</span><span class="n">get_plotter</span><span class="p">(</span><span class="n">truth_binning</span><span class="p">)</span>
<span class="n">truth_binning</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="n">truth_binning</span><span class="o">.</span><span class="n">fill_from_csv_file</span><span class="p">(</span><span class="s2">&quot;modelA_truth.txt&quot;</span><span class="p">)</span>
<span class="n">pltr</span><span class="o">.</span><span class="n">plot_values</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;model A&quot;</span><span class="p">,</span> <span class="n">scatter</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
<span class="n">truth_binning</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="n">truth_binning</span><span class="o">.</span><span class="n">fill_from_csv_file</span><span class="p">(</span><span class="s2">&quot;modelB_truth.txt&quot;</span><span class="p">)</span>
<span class="n">pltr</span><span class="o">.</span><span class="n">plot_values</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;model B&quot;</span><span class="p">,</span> <span class="n">scatter</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
<span class="n">pltr</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">pltr</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;compare_truth.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../../_images/compare_truth.png" src="../../_images/compare_truth.png" />
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../README.html" class="btn btn-neutral float-left" title="An example analysis" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../01/README.html" class="btn btn-neutral float-right" title="Example 01 – Building a response matrix" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Lukas Koch.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>